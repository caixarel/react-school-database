(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{58:function(e,t,s){},59:function(e,t,s){},90:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s.n(n),c=s(45),r=s.n(c),i=(s(58),s(59),s(4)),o=s(8),d=s.n(o),l=s(6),u=s(5),j=s(13),h=s.n(j),b=s(17),p=s(12),O=s(28),m=s(20),x=s(22),f=s(30),v=s.n(f),g=s(0),N=a.a.createContext(),y=function(e){Object(m.a)(s,e);var t=Object(x.a)(s);function s(){var e;return Object(p.a)(this,s),(e=t.call(this)).signIn=function(){var t=Object(b.a)(h.a.mark((function t(s,n){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("https://school-database-bruno.herokuapp.com/api/users",{auth:{password:n,username:s}}).catch((function(e){}));case 2:return(a=t.sent)&&(e.setState((function(){return{authenticatedUser:a,username:s,password:n}})),v.a.set("authenticatedUser",JSON.stringify(a),{expires:1})),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}(),e.signOut=function(){e.setState((function(){return{authenticatedUser:null,username:null,password:null}})),v.a.remove("authenticatedUser")},e.cookie=v.a.get("authenticatedUser"),e.state={authenticatedUser:e.cookie?JSON.parse(e.cookie):null,username:e.cookie?JSON.parse(e.cookie).config.auth.username:null,password:e.cookie?JSON.parse(e.cookie).config.auth.password:null},e}return Object(O.a)(s,[{key:"render",value:function(){var e={actions:{signIn:this.signIn,signOut:this.signOut},state:this.state};return Object(g.jsx)(N.Provider,{value:e,children:this.props.children})}}]),s}(n.Component),C=N.Consumer,w=N,S=s(36);var k=function(e){var t=Object(n.useState)(),s=Object(i.a)(t,2),a=s[0],c=s[1],r=Object(l.g)().id,o="",j="",h=Object(n.useContext)(w);function b(){o=h.state.password,j=h.state.username,d.a.delete("https://school-database-bruno.herokuapp.com/api/courses/".concat(r),{auth:{password:o,username:j}}).then((function(t){e.history.push("/")})).catch((function(t){e.history.push("/error")}))}return Object(n.useEffect)((function(){d.a.get("https://school-database-bruno.herokuapp.com/api/courses/".concat(r)).then((function(e){c(e.data)})).catch((function(t){404===t.response.status?e.history.push("/notfound"):500===t.response.status&&e.history.push("/error")}))}),[r,e.history]),Object(g.jsx)(C,{children:function(e){var t;return Object(g.jsx)("div",{id:"root",children:Object(g.jsxs)("main",{children:[Object(g.jsx)("div",{className:"actions--bar",children:Object(g.jsxs)("div",{className:"wrap",children:[e.state.authenticatedUser&&(null===a||void 0===a?void 0:a.User.id)&&(null===(t=e.state.authenticatedUser.data)||void 0===t?void 0:t.id)===a.User.id&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(u.b,{to:"/courses/".concat(r,"/update"),className:"button",children:"Update Course"}),Object(g.jsx)("button",{className:"button",onClick:b,children:"Delete Course"})]}),Object(g.jsx)(u.b,{to:"/",className:"button button-secondary",children:"Return to List"})]})}),Object(g.jsxs)("div",{className:"wrap",children:[Object(g.jsx)("h2",{children:"Course Detail"}),Object(g.jsx)("form",{children:Object(g.jsxs)("div",{className:"main--flex",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("h3",{className:"course--detail--title",children:"Course"}),Object(g.jsx)("h4",{className:"course--name",children:null===a||void 0===a?void 0:a.title}),Object(g.jsxs)("p",{children:[null===a||void 0===a?void 0:a.User.firstName," ",null===a||void 0===a?void 0:a.User.lastName]}),Object(g.jsx)(S.a,{children:null===a||void 0===a?void 0:a.description})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("h3",{className:"course--detail--title",children:"Estimated Time"}),Object(g.jsx)("p",{children:null===a||void 0===a?void 0:a.estimatedTime}),Object(g.jsx)("h3",{className:"course--detail--title",children:"Materials Needed"}),Object(g.jsx)("ul",{className:"course--detail--list",children:Object(g.jsx)(S.a,{children:null===a||void 0===a?void 0:a.materialsNeeded})})]})]})})]})]})})}})};var F=function(e){var t=Object(n.useContext)(w),s=Object(n.useState)(""),a=Object(i.a)(s,2),c=a[0],r=a[1],o=Object(n.useState)(""),l=Object(i.a)(o,2),j=l[0],p=l[1],O=Object(n.useState)(""),m=Object(i.a)(O,2),x=m[0],f=m[1],v=Object(n.useState)(""),N=Object(i.a)(v,2),y=N[0],C=N[1],S=Object(n.useState)([]),k=Object(i.a)(S,2),F=k[0],T=k[1];function U(){return(U=Object(b.a)(h.a.mark((function s(n){return h.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return n.preventDefault(),s.next=3,d.a.post("https://school-database-bruno.herokuapp.com/api/courses",{title:c,description:j,estimatedTime:x,materialsNeeded:y},{auth:{password:t.state.password,username:t.state.username}}).then((function(t){e.history.push("/")})).catch((function(t){400===t.response.status?T(t.response.data.errors):404===t.response.status?e.history.push("/notfound"):500===t.response.status&&e.history.push("/error")}));case 3:case"end":return s.stop()}}),s)})))).apply(this,arguments)}function V(e){var t=e.target.name,s=e.target.value;"title"===t?r(s):"description"===t?p(s):"estimatedTime"===t?f(s):"materialsNeeded"===t&&C(s)}return Object(g.jsx)("div",{id:"root",children:Object(g.jsx)("main",{children:Object(g.jsxs)("div",{className:"wrap",children:[Object(g.jsx)("h2",{children:"Create Course"}),F.length>0?Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"validation--errors",children:[Object(g.jsx)("h3",{children:"Validation Errors"}),Object(g.jsx)("ul",{children:F.map((function(e,t){return Object(g.jsx)("li",{children:e},t)}))})]})}):null,Object(g.jsxs)("form",{onSubmit:function(e){return U.apply(this,arguments)},children:[Object(g.jsxs)("div",{className:"main--flex",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("label",{htmlFor:"courseTitle",children:"Course Title"}),Object(g.jsx)("input",{id:"courseTitle",name:"title",type:"text",defaultValue:"",onChange:V}),Object(g.jsx)("p",{children:"By Joe Smith"}),Object(g.jsx)("label",{htmlFor:"courseDescription",children:"Course Description"}),Object(g.jsx)("textarea",{id:"courseDescription",name:"description",onChange:V})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("label",{htmlFor:"estimatedTime",children:"Estimated Time"}),Object(g.jsx)("input",{id:"estimatedTime",name:"estimatedTime",type:"text",defaultValue:"",onChange:V}),Object(g.jsx)("label",{htmlFor:"materialsNeeded",children:"Materials Needed"}),Object(g.jsx)("textarea",{id:"materialsNeeded",name:"materialsNeeded",onChange:V})]})]}),Object(g.jsx)("button",{className:"button",type:"submit",children:"Create Course"}),Object(g.jsx)(u.b,{to:"/",className:"button button-secondary",children:"Cancel"})]})]})})})};var T=function(){return Object(g.jsx)(C,{children:function(e){return Object(g.jsx)("header",{children:Object(g.jsxs)("div",{className:"wrap header--flex",children:[Object(g.jsx)("h1",{className:"header--logo",children:Object(g.jsx)(u.b,{to:"/",children:"Courses"})}),Object(g.jsx)("nav",{children:Object(g.jsx)("ul",{className:"header--signedin",children:e.state.authenticatedUser?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("li",{children:e.state.authenticatedUser.data.firstName}),Object(g.jsx)("li",{children:Object(g.jsx)(u.b,{to:"/signout",children:"Sign Out"})})]}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("li",{children:Object(g.jsx)(u.b,{to:"/signin",children:"Sign In"})}),Object(g.jsx)("li",{children:Object(g.jsx)(u.b,{to:"/signup",children:"Sign Up"})})]})})})]})})}})};var U=function(e){var t,s=Object(n.useContext)(w),a=Object(n.useState)(""),c=Object(i.a)(a,2),r=c[0],o=c[1],j=Object(n.useState)(""),p=Object(i.a)(j,2),O=p[0],m=p[1],x=Object(n.useState)(""),f=Object(i.a)(x,2),v=f[0],N=f[1],y=Object(n.useState)(""),S=Object(i.a)(y,2),k=S[0],F=S[1],T=Object(n.useState)(),U=Object(i.a)(T,2),V=U[0],E=U[1],D=Object(n.useState)([]),A=Object(i.a)(D,2),I=A[0],J=A[1],P=Object(l.g)().id;function B(e){return L.apply(this,arguments)}function L(){return(L=Object(b.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,d.a.put("https://school-database-bruno.herokuapp.com/api/courses/".concat(P),{title:r,description:O,estimatedTime:v,materialsNeeded:k},{auth:{password:s.state.password,username:s.state.username}}).then((function(t){e.history.push("/")})).catch((function(t){400===t.response.status?J(t.response.data.errors):404===t.response.status?e.history.push("/notfound"):500===t.response.status&&e.history.push("/error")}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function M(e){var t=e.target.name,s=e.target.value;"title"===t?o(s):"description"===t?m(s):"estimatedTime"===t?N(s):"materialsNeeded"===t&&F(s)}return Object(n.useEffect)((function(){d.a.get("https://school-database-bruno.herokuapp.com/api/courses/".concat(P)).then((function(t){var n;E(t.data),F(t.data.materialsNeeded),o(t.data.title),m(t.data.description),N(t.data.estimatedTime),(null===(n=s.state.authenticatedUser.data)||void 0===n?void 0:n.id)!==t.data.User.id&&e.history.push("/forbidden")})).catch((function(t){400===t.response.status?J(t.response.data.errors):404===t.response.status?e.history.push("/notfound"):500===t.response.status&&e.history.push("/error")}))}),[P,e.history,null===(t=s.state.authenticatedUser.data)||void 0===t?void 0:t.id]),Object(g.jsx)(C,{children:function(e){return Object(g.jsxs)("div",{className:"wrap",children:[Object(g.jsx)("h2",{children:"Update Course"}),I.length>0?Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"validation--errors",children:[Object(g.jsx)("h3",{children:"Validation Errors"}),Object(g.jsx)("ul",{children:I.map((function(e,t){return Object(g.jsx)("li",{children:e},t)}))})]})}):null,Object(g.jsxs)("form",{children:[Object(g.jsxs)("div",{className:"main--flex",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("label",{htmlFor:"courseTitle",children:"Course Title"}),Object(g.jsx)("input",{id:"courseTitle",name:"title",type:"text",defaultValue:null===V||void 0===V?void 0:V.title,onChange:M}),Object(g.jsx)("label",{htmlFor:"courseDescription",children:"Course Description"}),Object(g.jsx)("textarea",{id:"courseDescription",name:"description",defaultValue:null===V||void 0===V?void 0:V.description,onChange:M})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("label",{htmlFor:"estimatedTime",children:"Estimated Time"}),Object(g.jsx)("input",{id:"estimatedTime",name:"estimatedTime",type:"text",defaultValue:null===V||void 0===V?void 0:V.estimatedTime,onChange:M}),Object(g.jsx)("label",{htmlFor:"materialsNeeded",children:"Materials Needed"}),Object(g.jsx)("textarea",{id:"materialsNeeded",name:"materialsNeeded",defaultValue:k,onChange:M})]})]}),Object(g.jsx)("button",{className:"button",type:"submit",onClick:B,children:"Update Course"}),Object(g.jsx)(u.b,{to:"/",className:"button button-secondary",children:"Cancel"})]})]})}})};var V=function(e){var t=Object(n.useState)(""),s=Object(i.a)(t,2),a=s[0],c=s[1],r=Object(n.useState)(""),o=Object(i.a)(r,2),d=o[0],l=o[1],j=Object(n.useContext)(w),h=Object(n.useState)([]),b=Object(i.a)(h,2),p=b[0],O=b[1];return Object(g.jsxs)("div",{className:"form--centered",children:[Object(g.jsx)("h2",{children:"Sign In"}),p.length>0?Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"validation--errors",children:[Object(g.jsx)("h3",{children:"Validation Errors"}),Object(g.jsx)("ul",{children:Object(g.jsx)("li",{children:p})})]})}):null,Object(g.jsxs)("form",{onSubmit:function(t){t.preventDefault();var s=(e.location.state||{from:{pathname:"/"}}).from;j.actions.signIn(d,a).then((function(t){t?e.history.push(s):O("The username or password are not correct")})).catch((function(t){404===t.response.status?e.history.push("/notfound"):500===t.response.status&&e.history.push("/error")}))},children:[Object(g.jsx)("label",{htmlFor:"emailAddress",children:"Email Address"}),Object(g.jsx)("input",{id:"emailAddress",name:"emailAddress",type:"email",defaultValue:"",onChange:function(e){l(e.target.value)}}),Object(g.jsx)("label",{htmlFor:"password",children:"Password"}),Object(g.jsx)("input",{id:"password",name:"password",type:"password",defaultValue:"",onChange:function(e){c(e.target.value)}}),Object(g.jsx)("button",{className:"button",type:"submit",children:"Sign In"}),Object(g.jsx)(u.b,{to:"/",className:"button button-secondary",children:"Cancel"})]}),Object(g.jsxs)("p",{children:["Don't have a user account? Click here to ",Object(g.jsx)(u.b,{to:"/signup",children:"sign up"}),"!"]})]})};var E=function(e){var t=Object(n.useState)(""),s=Object(i.a)(t,2),a=s[0],c=s[1],r=Object(n.useState)(""),o=Object(i.a)(r,2),l=o[0],j=o[1],p=Object(n.useState)(""),O=Object(i.a)(p,2),m=O[0],x=O[1],f=Object(n.useState)([]),v=Object(i.a)(f,2),N=v[0],y=v[1],C=Object(n.useState)(""),S=Object(i.a)(C,2),k=S[0],F=S[1],T=Object(n.useContext)(w);function U(){return(U=Object(b.a)(h.a.mark((function t(s){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.preventDefault(),t.next=3,d.a.post("https://school-database-bruno.herokuapp.com/api/users",{firstName:a,lastName:l,emailAddress:k,password:m}).then((function(t){T.actions.signIn(k,m),e.history.push("/")})).catch((function(t){404===t.response.status?e.history.push("/notfound"):500===t.response.status?e.history.push("/error"):y(t.response.data.errors)}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function V(e){var t=e.target.name,s=e.target.value;"firstName"===t?c(s):"lastName"===t?j(s):"emailAddress"===t?F(s):"password"===t&&x(s)}return Object(g.jsxs)("div",{className:"form--centered",children:[Object(g.jsx)("h2",{children:"Sign Up"}),N.length>0?Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"validation--errors",children:[Object(g.jsx)("h3",{children:"Validation Errors"}),Object(g.jsx)("ul",{children:N.map((function(e,t){return Object(g.jsx)("li",{children:e},t)}))})]})}):null,Object(g.jsxs)("form",{children:[Object(g.jsx)("label",{htmlFor:"firstName",children:"First Name"}),Object(g.jsx)("input",{id:"firstName",name:"firstName",type:"text",defaultValue:"",onChange:V}),Object(g.jsx)("label",{htmlFor:"lastName",children:"Last Name"}),Object(g.jsx)("input",{id:"lastName",name:"lastName",type:"text",defaultValue:"",onChange:V}),Object(g.jsx)("label",{htmlFor:"emailAddress",children:"Email Address"}),Object(g.jsx)("input",{id:"emailAddress",name:"emailAddress",type:"email",defaultValue:"",onChange:V}),Object(g.jsx)("label",{htmlFor:"password",children:"Password"}),Object(g.jsx)("input",{id:"password",name:"password",type:"password",defaultValue:"",onChange:V}),Object(g.jsx)("button",{className:"button",type:"submit",onClick:function(e){return U.apply(this,arguments)},children:"Sign Up"}),Object(g.jsx)(u.b,{to:"/",className:"button button-secondary",children:"Cancel"})]}),Object(g.jsxs)("p",{children:["Already have a user account? Click here to ",Object(g.jsx)(u.b,{to:"/signin",children:"sign in"}),"!"]})]})};var D=function(e){var t=Object(n.useContext)(w);return Object(n.useEffect)((function(){t.actions.signOut(),e.history.push("/")}),[t.actions,e.history]),null},A=s(14),I=s(51),J=["component"],P=function(e){var t=e.component,s=Object(I.a)(e,J);return Object(g.jsx)(C,{children:function(e){return Object(g.jsx)(l.b,Object(A.a)(Object(A.a)({},s),{},{render:function(s){return e.state.authenticatedUser?Object(g.jsx)(t,Object(A.a)({},s)):Object(g.jsx)(l.a,{to:{pathname:"/signin",state:{from:s.location}}})}}))}})};var B=function(){return Object(g.jsx)("div",{id:"root",children:Object(g.jsx)("main",{children:Object(g.jsxs)("div",{className:"wrap",children:[Object(g.jsx)("h2",{children:"Error"}),Object(g.jsx)("p",{children:"Sorry! We just encountered an unexpected error."})]})})})};var L=function(){return Object(g.jsx)("div",{id:"root",children:Object(g.jsx)("main",{children:Object(g.jsxs)("div",{className:"wrap",children:[Object(g.jsx)("h2",{children:"Not Found"}),Object(g.jsx)("p",{children:"Sorry! We couldn't find the page you're looking for."})]})})})};var M=function(){return Object(g.jsx)("div",{id:"root",children:Object(g.jsx)("main",{children:Object(g.jsxs)("div",{className:"wrap",children:[Object(g.jsx)("h2",{children:"Forbidden"}),Object(g.jsx)("p",{children:"Oh oh! You can't access this page."})]})})})};var W=function(e){var t=Object(n.useState)([]),s=Object(i.a)(t,2),a=s[0],c=s[1];return Object(n.useEffect)((function(){d.a.get("https://school-database-bruno.herokuapp.com/api/courses").then((function(e){c(e.data)})).catch((function(t){404===t.response.status?e.history.push("/notfound"):500===t.response.status&&e.history.push("/error")}))}),[e.history]),Object(g.jsx)("div",{id:"root",children:Object(g.jsx)("main",{children:Object(g.jsxs)("div",{className:"wrap main--grid",children:[a.map((function(e,t){return Object(g.jsxs)(u.b,{to:"/courses/".concat(e.id),className:"course--module course--link",children:[Object(g.jsx)("h2",{className:"course--label",children:"Course"}),Object(g.jsx)("h3",{className:"course--title",children:e.title})]},t)})),Object(g.jsx)(u.b,{to:"/courses/create",className:"course--module course--add--module",children:Object(g.jsxs)("span",{className:"course--add--title",children:[Object(g.jsx)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 13 13",className:"add",children:Object(g.jsx)("polygon",{points:"7,6 7,0 6,0 6,6 0,6 0,7 6,7 6,13 7,13 7,7 13,7 13,6 "})}),"New Course"]})})]})})})};var R=function(){return Object(g.jsx)(y,{children:Object(g.jsxs)(u.a,{children:[Object(g.jsx)(T,{}),Object(g.jsxs)(l.d,{children:[Object(g.jsx)(l.b,{exact:!0,path:"/",component:W}),Object(g.jsx)(P,{exact:!0,path:"/courses/create",component:F}),Object(g.jsx)(P,{exact:!0,path:"/courses/:id/update",component:U}),Object(g.jsx)(l.b,{exact:!0,path:"/courses/:id",component:k}),Object(g.jsx)(l.b,{exact:!0,path:"/signin",component:V}),Object(g.jsx)(l.b,{exact:!0,path:"/signup",component:E}),Object(g.jsx)(l.b,{exact:!0,path:"/signout",component:D}),Object(g.jsx)(l.b,{exact:!0,path:"/error",component:B}),Object(g.jsx)(l.b,{exact:!0,path:"/notfound",component:L}),Object(g.jsx)(l.b,{exact:!0,path:"/forbidden",component:M}),Object(g.jsx)(l.b,{component:L})]})]})})},Y=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,94)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;s(e),n(e),a(e),c(e),r(e)}))};r.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(R,{})}),document.getElementById("root")),Y()}},[[90,1,2]]]);
//# sourceMappingURL=main.33359991.chunk.js.map